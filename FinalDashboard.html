<!DOCTYPE html>
<html>
    <head>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="https://d3js.org/d3.v5.min.js"></script>
		<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
		<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
        <script src="https://d3js.org/topojson.v2.min.js"></script>

		<link rel="stylesheet" type="text/css" href="mystyle.css">
		<script type="text/javascript">
		// global variables
            var myEntireData;
            var myData_Lender;
            var myData_Credit;
            var myData_Pie;
            var myData_Donut;
            var myData_Line;
            var margin_lender = {top: 10, right: 10, bottom: 30, left: 80};
            var svgWidth_lender = 400 - margin_lender.left - margin_lender.right;
            var svgHeight_lender = 180 - margin_lender.top - margin_lender.bottom;
            var margin_credit = {top: 10, right: 10, bottom: 30, left: 80};
            var svgWidth_credit = 420 - margin_credit.left - margin_credit.right;
            var svgHeight_credit = 180 - margin_credit.top - margin_credit.bottom;
            var margin_pie = {top: 10, right: 10, bottom: 30, left: 20};
            var svgWidth_pie = 500 - margin_pie.left - margin_pie.right;
            var svgHeight_pie = 200 - margin_pie.top - margin_pie.bottom;
            var margin_donut = {top: 10, right: 10, bottom: 30, left: 100};
            var svgWidth_donut = 300 - margin_donut.left - margin_donut.right;
            var svgHeight_donut = 200 - margin_donut.top - margin_donut.bottom;
            var margin_line = {top: 10, right: 10, bottom: 30, left: 30};
            var svgWidth_line = 380 - margin_line.left - margin_line.right;
            var svgHeight_line = 180 - margin_line.top - margin_line.bottom;
            var radius = 110;
		    var myChorData;
		    var margin_chor = { top: 10, right: 10, bottom: 30, left: 100 };
		    var ED_Data;
		    var stateValue;
		    var gWidth_chor = 500 - margin_chor.left - margin_chor.right;
		    var gHeight_chor = 150 - margin_chor.top - margin_chor.bottom;
			const colors = [
			      '#E5E7E9'
			      , '#D5DBDB'
			      , '#CCD1D1'
			      , '#E5E8E8'
			      , '#D6DBDF'
			      , '#AEB6BF'
			      , '#85929E'
			      , '#85929E'
			      , '#5D6D7E'
			      , '#34495E'
			      , '#2E4053'
			      , '#273746'
			    ];


			
			function loadData()
            {
              d3.csv("https://raw.githubusercontent.com/gowthamsabbineni/Project/master/VA_Project.csv")
                .then(function(data)
              {
                myEntireData = data;
                // set dimensions for all svgs
                d3.select("#LenderBarSVG")
                            .attr("width", svgWidth_lender + margin_lender.left + margin_lender.right)
                            .attr("height", svgHeight_lender + margin_lender.top + margin_lender.bottom)
                            .append("g")
                            .attr("id", "svg_lender_g_id")
                            .attr("transform", "translate(" + margin_lender.left + "," + margin_lender.top + ")");
				d3.select("#CreditScoreSVG")
                            .attr("width", svgWidth_credit + margin_credit.left + margin_credit.right)
                            .attr("height", svgHeight_credit + margin_credit.top + margin_credit.bottom)
                            .append("g")
                            .attr("id", "svg_CreditScore_g_id")
                            .attr("transform", "translate(" + (margin_credit.left-10) + "," + (margin_credit.top) + ")");
        d3.select("#PieChartSVG")
                            .attr("width", svgWidth_pie + margin_pie.left + margin_pie.right)
                            .attr("height", svgHeight_pie + margin_pie.top + margin_pie.bottom)
                            .append("g")
                            .attr("id", "svg_PieChart_g_id")
                            .attr("transform", "translate(" + margin_pie.left + "," + margin_pie.top + ")");
        d3.select("#DoNutSVG")
                            .attr("width", svgWidth_donut + margin_donut.left + margin_donut.right)
                            .attr("height", svgHeight_donut + margin_donut.top + margin_donut.bottom)
                            .append("g")
                            .attr("id", "svg_DoNut_g_id")
                            .attr("transform", "translate(" + margin_donut.left + "," + margin_donut.top + ")");

        d3.select("#MonthlyLineChartSVG")
                            .attr("width", svgWidth_line + margin_line.left + margin_line.right)
                            .attr("height", svgHeight_line + margin_line.top + margin_line.bottom)
                            .append("g")
                            .attr("id", "svg_LineGraph_g_id")
                            .attr("transform", "translate(" + margin_line.left + "," + margin_line.top + ")");

        d3.select("#ChoroplethSVG")
                            .attr("width", gWidth_chor + margin_chor.left + margin_chor.right)
                            .attr("height", gHeight_chor + margin_chor.top + margin_chor.bottom)
                            .append("g")
                            .attr("id", "svg_Choropleth")
                            .attr("transform", "translate(" + margin_chor.left + "," + margin_chor.top + ")");

                generateLenderBar(null,"Status");
                createLenderBarChart();
                generateCreditBar(null,"Status");
                createCreditBar();
                generatePieChart(null,"Status");
                createPieChart();
                generateDoNut(null,"Status");
                createDoNut();
                generateLineGraph(null,"Status");
                createLineGraph();
	            generateChorData(null, "Status");
	          ED_Data = d3.nest().key(function (d) {
	            return d.State;
	          }).rollup(function (d) {
	            return d3.min(d, function (g) { return g.State_Code; });
	          }).entries(myEntireData);
	          //console.log("ED_Data: "+ED_Data);
	          showMap(myChorData)

              });
            }
			
			function generateLenderBar(myCommodity,filterType)
            {
              if (myCommodity == "1" && filterType == "Status")
              {
                myData_Lender = d3.nest()
								.key(function(d){
									return d.LenderId;})
								.sortKeys(d3.ascending)
								.key(function(v){
								return v.Status==1;})
								.rollup(function(d){
								return d.length;})
								.entries(myEntireData);
				for(var i=0;i<myData_Lender.length;i++){
					myData_Lender[i].value = myData_Lender[i].values[0].value;
					
				if(myData_Lender[i].values.length > 1){
					if(myData_Lender[i].values[0].key == "true"){
					myData_Lender[i].value = myData_Lender[i].values[0].value;
					}
					else if(myData_Lender[i].values[1].key == "true"){
					myData_Lender[i].value = myData_Lender[i].values[1].value;
					}
					else{
					myData_Lender[i].value = 0;
					}
				}
				else{
					if(myData_Lender[i].values[0].key == "true"){
					myData_Lender[i].value = myData_Lender[i].values[0].value;
					}
					else{
					myData_Lender[i].value = 0;
					}
				}
				}
								
              } else if(myCommodity == "2" && filterType == "Status"){
				myData_Lender = d3.nest()
								.key(function(d){
									return d.LenderId;})
								.sortKeys(d3.ascending)
								.key(function(v){
								return v.Status==2;})
								.rollup(function(d){
								return d.length;})
								.entries(myEntireData);
				for(var i=0;i<myData_Lender.length;i++){
					myData_Lender[i].value = myData_Lender[i].values[0].value;
				}
			  } else
              {
                myData_Lender = d3.nest()
								.key(function(d){
									return d.LenderId;})
								.sortKeys(d3.ascending)
								.rollup(function(d){
								return d.length;})
								.entries(myEntireData)            
			
				}
              // datum = { key : LenderId, value : count }
			  };
			  function generateCreditBar(myCommodity,filterType)
            { if(filterType == "Status"){
              if (myCommodity == "1")
              {
                myData_Credit = d3.nest()
								.key(function(d){
									return d.EstimatedCreditScore;})
								.sortKeys(d3.ascending)
								.key(function(v){
								return v.Status==1;})
								.rollup(function(d){
								return d.length;})
								.entries(myEntireData);
				
				for(var i=0;i<myData_Credit.length;i++){	
					if(myData_Credit[i].values.length > 1){
					if(myData_Credit[i].values[0].key == "true"){
					myData_Credit[i].value = myData_Credit[i].values[0].value;
					}
					else if(myData_Credit[i].values[1].key == "true"){
					myData_Credit[i].value = myData_Credit[i].values[1].value;
					}
					else{
					myData_Credit[i].value = 0;
					}
				}
				else{
					if(myData_Credit[i].values[0].key == "true"){
					myData_Credit[i].value = myData_Credit[i].values[0].value;
					}
					else{
					myData_Credit[i].value = 0;
					}
					
				}
				}
				
              } else if(myCommodity == "2" && filterType == "Status"){
				myData_Credit =	d3.nest()
								.key(function(d){
									return d.EstimatedCreditScore;})
								.sortKeys(d3.ascending)
								.key(function(v){
								return v.Status==2;})
								.rollup(function(d){
								return d.length;})
								.entries(myEntireData)
				for(var i=0;i<myData_Credit.length;i++){
				 if(myData_Credit[i].values.length > 1){
					if(myData_Credit[i].values[0].key == "true"){
					myData_Credit[i].value = myData_Credit[i].values[0].value;
					}
					else if(myData_Credit[i].values[1].key == "true"){
					myData_Credit[i].value = myData_Credit[i].values[1].value;
					}
					else{
					myData_Credit[i].value = 0;
					}
				}
				else{
					if(myData_Credit[i].values[0].key == "true"){
					myData_Credit[i].value = myData_Credit[i].values[0].value;
					}
					else{
					myData_Credit[i].value = 0;
					}
				}
				}
			  }
			  else
              {
                myData_Credit = d3.nest()
								.key(function(d){
									return d.EstimatedCreditScore;})
								.sortKeys(d3.ascending)
								.rollup(function(d){
								return d.length;})
								.entries(myEntireData)
				}
              // datum = { key : EstimatedCreditScore, value : count }
			  }
			  else if(filterType == "Lender"){
					debugger;
					var lStatus = $("#StatusDD").val();
					
					if(lStatus == ""){
					{
                myData_Credit = d3.nest()
								.key(function(d){if (( d.LenderId === myCommodity)) return d.EstimatedCreditScore;})
								.sortKeys(d3.ascending)
								.rollup(function(d){
								return d.length;})
								.entries(myEntireData)
				var NewCreditArr = [];
				for(var i=0;i<myData_Credit.length-1;i++){
					if(myData_Credit.length > 4){
						NewCreditArr.push(myData_Credit[i]);
					}
				}
				myData_Credit = NewCreditArr;
					
				}
				}
				else if(lStatus == "1"){
					{
                myData_Credit = d3.nest()
								.key(function(d){if (( d.LenderId === myCommodity && d.Status === "1") ) return d.EstimatedCreditScore;})
								.sortKeys(d3.ascending)
								.rollup(function(d){
								return d.length;})
								.entries(myEntireData)
				var NewCreditArr = [];
				for(var i=0;i<myData_Credit.length-1;i++){
					if(myData_Credit.length > 4){
						NewCreditArr.push(myData_Credit[i]);
					}
				}
				myData_Credit = NewCreditArr;
				}
				}
				else if(lStatus == "2"){
					{
                myData_Credit = d3.nest()
								.key(function(d){if (( d.LenderId === myCommodity && d.Status === "2") ) return d.EstimatedCreditScore;})
								.sortKeys(d3.ascending)
								.rollup(function(d){
								return d.length;})
								.entries(myEntireData)
				var NewCreditArr = [];
				for(var i=0;i<myData_Credit.length-1;i++){
					if(myData_Credit.length > 4){
						NewCreditArr.push(myData_Credit[i]);
					}
				}
				myData_Credit = NewCreditArr;
					}
				}
			  }
		}
         function generatePieChart(myCommodity,filterType){
			if(filterType == "Status"){
					 if(myCommodity == "1"){
						myData_Pie = d3.nest()
							  .key(function (d) {return d.PropertyTypeId;})
							  .key(function(v){return v.Status==1;})
							  .rollup(function(d){return d.length;})
							  .entries(myEntireData)
						for(var i=0;i<myData_Pie.length;i++){
								if(myData_Pie[i].values.length > 1){
								if(myData_Pie[i].values[0].key == "true"){
								myData_Pie[i].value = myData_Pie[i].values[0].value;
								}
								else if(myData_Pie[i].values[1].key == "true"){
								myData_Pie[i].value = myData_Pie[i].values[1].value;
								}
								else{
								myData_Pie[i].value = 0;
								}
							}
							else{
								if(myData_Pie[i].values[0].key == "true"){
								myData_Pie[i].value = myData_Pie[i].values[0].value;
								}
								else{
								myData_Pie[i].value = 0;
								}
							}
							}
					 }else if(myCommodity == "2" && filterType == "Status"){
						myData_Pie = d3.nest()
							  .key(function (d) {return d.PropertyTypeId;})
							  .key(function(v){return v.Status==2;})
							  .rollup(function(d){return d.length;})
							  .entries(myEntireData)
						for(var i=0;i<myData_Pie.length;i++){
								if(myData_Pie[i].values.length > 1){
								if(myData_Pie[i].values[0].key == "true"){
								myData_Pie[i].value = myData_Pie[i].values[0].value;
								}
								else if(myData_Pie[i].values[1].key == "true"){
								myData_Pie[i].value = myData_Pie[i].values[1].value;
								}
								else{
								myData_Pie[i].value = 0;
								}
							}
							else{
								if(myData_Pie[i].values[0].key == "true"){
								myData_Pie[i].value = myData_Pie[i].values[0].value;
								}
								else{
								myData_Pie[i].value = 0;
								}
								
							}
							}
					 }else{
					  myData_Pie = d3.nest()
					  .key(function (d) {
						return d.PropertyTypeId;
					  })
					  .rollup(function (d) {
						return d.length;
					  })
					  .entries(myEntireData);
						}
			} else if(filterType == "Lender"){
				debugger;
					var lStatus = $("#StatusDD").val();
					if(lStatus == ""){
					{
                myData_Pie = d3.nest()
								.key(function(d){if (( d.LenderId === myCommodity)) return d.PropertyTypeId;})
								.sortKeys(d3.ascending)
								.rollup(function(d){
								return d.length;})
								.entries(myEntireData)
				var NewPieArr = [];
				for(var i=0;i<myData_Pie.length;i++){
					if(myData_Pie[i].key != "undefined"){
						NewPieArr.push(myData_Pie[i]);
					}
				}
				myData_Pie = NewPieArr;
				}
				}else if(lStatus == "1"){
					{
                myData_Pie = d3.nest()
								.key(function(d){if (( d.LenderId === myCommodity && d.Status == "1")) return d.PropertyTypeId;})
								.sortKeys(d3.ascending)
								.rollup(function(d){
								return d.length;})
								.entries(myEntireData)
				var NewPieArr = [];
				for(var i=0;i<myData_Pie.length;i++){
					if(myData_Pie[i].key != "undefined"){
						NewPieArr.push(myData_Pie[i]);
					}
				}
				myData_Pie = NewPieArr;
				}
				
				} else if(lStatus == "2"){
					{
                myData_Pie = d3.nest()
								.key(function(d){if (( d.LenderId === myCommodity && d.Status == "2")) return d.PropertyTypeId;})
								.sortKeys(d3.ascending)
								.rollup(function(d){
								return d.length;})
								.entries(myEntireData)
				var NewPieArr = [];
				for(var i=0;i<myData_Pie.length;i++){
					if(myData_Pie[i].key != "undefined"){
						NewPieArr.push(myData_Pie[i]);
					}
				}
				myData_Pie = NewPieArr;
				}
				
				}
			
			}
		}
		 function generateDoNut(myCommodity,filterType){
		 debugger;
		 if(filterType == "Status"){
			if(myCommodity == "1"){
				myData_Donut = d3.nest()
					  .key(function (d) {return d.RequestedLoanTypeId;})
					  .key(function(v){return v.Status==1;})
					  .rollup(function(d){return d.length;})
					  .entries(myEntireData)
				for(var i=0;i<myData_Donut.length;i++){
						myData_Donut[i].value = myData_Donut[i].values[0].value;
					}
			}else if(myCommodity == "2"){
				myData_Donut = d3.nest()
					  .key(function (d) {return d.RequestedLoanTypeId;})
					  .key(function(v){return v.Status==2;})
					  .rollup(function(d){return d.length;})
					  .entries(myEntireData)
				for(var i=0;i<myData_Donut.length;i++){
						myData_Donut[i].value = myData_Donut[i].values[0].value;
					}
			 }else{
			  myData_Donut = d3.nest()
			  .key(function (d) {
				return d.RequestedLoanTypeId;
			  })
			  .rollup(function (d) {
				return d.length;
			  })
			  .entries(myEntireData);
				}
		}else if(filterType == "Lender"){
			var lStatus = $("#StatusDD").val();
			if (lStatus == "1")
			{
                myData_Donut = d3.nest()
								.key(function(d){if (( d.LenderId === myCommodity && d.Status == "1")) return d.RequestedLoanTypeId;})
								.sortKeys(d3.ascending)
								.rollup(function(d){
								return d.length;})
								.entries(myEntireData)
				var NewDonutArr = [];
				for(var i=0;i<myData_Donut.length;i++){
					if(myData_Donut[i].key != "undefined"){
						NewDonutArr.push(myData_Donut[i]);
					}
				}
				myData_Donut = NewDonutArr;
			}else if(lStatus == "2"){
				myData_Donut = d3.nest()
								.key(function(d){if (( d.LenderId === myCommodity && d.Status == "2")) return d.RequestedLoanTypeId;})
								.sortKeys(d3.ascending)
								.rollup(function(d){
								return d.length;})
								.entries(myEntireData)
				var NewDonutArr = [];
				for(var i=0;i<myData_Donut.length;i++){
					if(myData_Donut[i].key != "undefined"){
						NewDonutArr.push(myData_Donut[i]);
					}
				}
				myData_Donut = NewDonutArr;
			
			}else{
				myData_Donut = d3.nest()
								.key(function(d){if (( d.LenderId === myCommodity)) return d.RequestedLoanTypeId;})
								.sortKeys(d3.ascending)
								.rollup(function(d){
								return d.length;})
								.entries(myEntireData)
				var NewDonutArr = [];
				for(var i=0;i<myData_Donut.length;i++){
					if(myData_Donut[i].key != "undefined"){
						NewDonutArr.push(myData_Donut[i]);
					}
				}
				myData_Donut = NewDonutArr;
			
			}
		}
	}

		
function parseData(data) {
        var monthNames={
       "Jan":1,
       "Feb":2,
       "Mar":3,
       "Apr":4,
       "May":5,
       "Jun":6,
       "Jul":7,
       "Aug":8,
       "Sep":9
     };
			  var arr =[];
			  for (var i=0 ;i<data.length;i++){
				arr.push(
				  {date: new Date("2018-" +monthNames[data[i].key]+ "-01"),
				  value : +data[i].value
				  }
				);
			  }
			  return arr;
   }
function sortData(data)
   {
     var monthNames={
       "Jan":1,
       "Feb":2,
       "Mar":3,
       "Apr":4,
       "May":5,
       "Jun":6,
       "Jul":7,
       "Aug":8,
       "Sep":9
     };

     data.sort(function(a,b){
       var x=monthNames[a.key]-monthNames[b.key];
       return x;
       console.log(data);
     });
   }

        function generateLineGraph(myCommodity,filterType){
		debugger;
		if(filterType == "Status"){
			if(myCommodity == "1"){
				myData_Line = d3.nest()
			   .key(function(d) {
				var date=d.UpdatedOn;
					month=date.substring(0,date.indexOf(" "));
					return month;})
				.key(function(v){return v.Status==1;})
				.rollup(function(d) {return d.length;})
				.entries(myEntireData)
				
				for(var i=0;i<myData_Line.length;i++){
					if(myData_Line[i].values.length > 1){
						if(myData_Line[i].values[0].key == "true"){
						myData_Line[i].value = myData_Line[i].values[0].value;
						}
						else if(myData_Line[i].values[1].key == "true"){
						myData_Line[i].value = myData_Line[i].values[1].value;
						}
						else{
						myData_Line[i].value = 0;
						}
					}
					else{
						if(myData_Line[i].values[0].key == "true"){
						myData_Line[i].value = myData_Line[i].values[0].value;
						}
						else{
						myData_Line[i].value = 0;
						}
					}
				}
				var sortedData=sortData(myData_Line);
				myData_Line =parseData(myData_Line);
			
		}else if(myCommodity == "2"){
			myData_Line = d3.nest()
           .key(function(d) {
            var date=d.UpdatedOn;
				month=date.substring(0,date.indexOf(" "));
				return month;})
			.key(function(v){return v.Status==2;})
            .rollup(function(d) {return d.length;})
            .entries(myEntireData)
			
			for(var i=0;i<myData_Line.length;i++){
				if(myData_Line[i].values.length > 1){
					if(myData_Line[i].values[0].key == "true"){
					myData_Line[i].value = myData_Line[i].values[0].value;
					}
					else if(myData_Line[i].values[1].key == "true"){
					myData_Line[i].value = myData_Line[i].values[1].value;
					}
					else{
					myData_Line[i].value = 0;
					}
				}
				else{
					if(myData_Line[i].values[0].key == "true"){
					myData_Line[i].value = myData_Line[i].values[0].value;
					}
					else{
					myData_Line[i].value = 0;
					}
					
				}
		}
			var sortedData=sortData(myData_Line);
            myData_Line =parseData(myData_Line);
		}else{
          myData_Line = d3.nest()
           .key(function(d) {
            var date=d.UpdatedOn;
           month=date.substring(0,date.indexOf(" "));
            return month;})
                      .rollup(function(d) {
              return d.length;
                      })
                      .entries(myEntireData)
			
            var sortedData=sortData(myData_Line);
            myData_Line =parseData(myData_Line);
        }
	} else if(filterType == "Lender"){
		var lStatus = $("#StatusDD").val();
		if(lStatus == ""){
		myData_Line = d3.nest()
						   .key(function(d){if ( d.LenderId === myCommodity){ 
										var date=d.UpdatedOn;
										month=date.substring(0,date.indexOf(" "));
										return month;}})
							.sortKeys(d3.ascending)
							.rollup(function(d){
								return d.length;})
								.entries(myEntireData)
				var NewLineArr = [];
				for(var i=0;i<myData_Line.length;i++){
					if(myData_Line[i].key != "undefined"){
						NewLineArr.push(myData_Line[i]);
					}
				}
				myData_Line = NewLineArr;
            var sortedData=sortData(myData_Line);
            myData_Line =parseData(myData_Line);
		}
		else if(lStatus == "1"){
			myData_Line = d3.nest()
						   .key(function(d){if (( d.LenderId === myCommodity && d.Status === lStatus)){ 
										var date=d.UpdatedOn;
										month=date.substring(0,date.indexOf(" "));
										return month;}})
							.sortKeys(d3.ascending)
							.rollup(function(d){
								return d.length;})
								.entries(myEntireData)
				var NewLineArr = [];
				for(var i=0;i<myData_Line.length;i++){
					if(myData_Line[i].key != "undefined"){
						NewLineArr.push(myData_Line[i]);
					}
				}
				myData_Line = NewLineArr;
			var sortedData=sortData(myData_Line);
            myData_Line =parseData(myData_Line);
		}
		else if(lStatus == "2"){
			myData_Line = d3.nest()
						   .key(function(d){if (( d.LenderId === myCommodity && d.Status === lStatus)){ 
										var date=d.UpdatedOn;
										month=date.substring(0,date.indexOf(" "));
										return month;}})
							.sortKeys(d3.ascending)
							.rollup(function(d){
								return d.length;})
								.entries(myEntireData)
				var NewLineArr = [];
				for(var i=0;i<myData_Line.length;i++){
					if(myData_Line[i].key != "undefined"){
						NewLineArr.push(myData_Line[i]);
					}
				}
				myData_Line = NewLineArr;
			var sortedData=sortData(myData_Line);
            myData_Line =parseData(myData_Line);
		}
	
	}
	}


		function createLenderBarChart() {
			  $("#svg_lender_g_id").html("");
              var svg = d3.select("#svg_lender_g_id");
              // generate scales
              var xScale = d3.scaleBand()
                                    .domain(myData_Lender.map( function(d) 
                                      { return d.key;
                                      }))
                                    .range([0, svgWidth_lender])
                                    .paddingInner(0.05);
              var yScale = d3.scaleLinear()
                                    .domain([0, d3.max(myData_Lender, function(d) { return d.value; })])
                                    .range([svgHeight_lender, 0]);
              // generate axis
              svg.append("g")
                  .attr("transform", "translate(0," + (svgHeight_lender) + ")")
                  .call(d3.axisBottom(xScale));
              svg.append("g")
                  // .attr("transform", "translate(" + 100 + ",0)")
                  .call(d3.axisLeft(yScale));
              svg.append("g")
                   .call(d3.axisLeft(yScale))
                   .append("text")
                   .attr("fill", "#000")
                   .attr("transform", "rotate(-90)")
                   .attr("y", 6)
                   .attr("dy", "-5em")
                   .attr("dx", "-6em")
                   .attr("text-anchor", "end")
                   .text("Total");
              svg.append("text")
				  .attr("transform", "translate(" + (svgWidth_lender/2) + " ," + (svgHeight_lender + margin_lender.top +10 ) + ")")
				  .style("text-anchor", "middle")         
                  .text("Lender ID")
                  .attr("dy", "1em")
                  

              // generate bars
              svg.selectAll("rect_bar")
                  .data(myData_Lender)
                  .enter()
                  .append("rect")
                  .attr("x", function(d, i)
                    {
                      // console.log( i + " " + xScale(d.key) );
                      return xScale(d.key);
                    })
                  .attr("y", function(d, i)
                    {
                      return yScale(d.value);
                    })
                  .attr("height", function(d, i)
                    {
                      return svgHeight_lender-yScale(d.value);
                    })
                  .attr("width", function(d, i)
                    {
                      return xScale.bandwidth();
                    })
                  .attr("class", "myrectlender")
                  .on("mouseover", function(d) {
					generateCreditBar(d.key,"Lender");
					createCreditBar();
					generatePieChart(d.key,"Lender");
					createPieChart();
					generateDoNut(d.key,"Lender");
					createDoNut();
					generateLineGraph(d.key,"Lender");
					createLineGraph();
                    /*generateDataTree(d.key);
                    removeTreeMap();
                    createTreeMap(); */
                  })
                  .on("mouseout", function(d) {
					var lStatus = $("#StatusDD").val();
                    generateCreditBar(lStatus,"Status");
					createCreditBar();
					generatePieChart(lStatus,"Status");
					createPieChart();
					generateDoNut(lStatus,"Status");
					createDoNut();
					generateLineGraph(lStatus,"Status");
					createLineGraph();
                  });
            } 
			
			
			function createCreditBar() {
			  $("#svg_CreditScore_g_id").html("");
              var svg = d3.select("#svg_CreditScore_g_id");
              // generate scales
              var xScale = d3.scaleBand()
                                    .domain(myData_Credit.map( function(d) 
                                      { return d.key;
                                      }))
                                    .range([0, svgWidth_credit])
                                    .paddingInner(0.05);
              var yScale = d3.scaleLinear()
                                    .domain([0, d3.max(myData_Credit, function(d) { return d.value; })])
                                    .range([svgHeight_lender, 0]);
              // generate axis
              svg.append("g")
                  .attr("transform", "translate(0," + (svgHeight_credit) + ")")
                  .call(d3.axisBottom(xScale));
			  svg.append("text")
				  .attr("transform", "translate(" + (svgWidth_credit/2) + " ," + (svgHeight_credit + margin_credit.top +10 ) + ")")
				  .style("text-anchor", "middle")         
                  .text("Credit Score")
              svg.append("g")
                  // .attr("transform", "translate(" + 100 + ",0)")
                  .call(d3.axisLeft(yScale));
              svg.append("g")
                   .call(d3.axisLeft(yScale))
                   .append("text")
                   .attr("fill", "#000")
                   .attr("transform", "rotate(-90)")
                   .attr("y", 6)
                   .attr("dy", "-5em")
                   .attr("dx", "-6em")
                   .attr("text-anchor", "end")
                   .text("Total");
			
              // generate bars
              svg.selectAll("rect_bar")
                  .data(myData_Credit)
                  .enter()
                  .append("rect")
                  .attr("x", function(d, i)
                    {
                      // console.log( i + " " + xScale(d.key) );
                      return xScale(d.key);
                    })
                  .attr("y", function(d, i)
                    {
                      return yScale(d.value);
                    })
                  .attr("height", function(d, i)
                    {
                      return svgHeight_credit-yScale(d.value);
                    })
                  .attr("width", function(d, i)
                    {
                      return xScale.bandwidth();
                    })
                  .attr("class", "myrectcredit")
                  .on("mouseover", function(d) {
                    /*generateDataTree(d.key);
                    removeTreeMap();
                    createTreeMap(); */
                  })
                  .on("mouseout", function(d) {
                    /*generateDataTree(null);
                    removeTreeMap();
                    createTreeMap();
					*/
                  });
            } 
            function createPieChart(){
				$("#svg_PieChart_g_id").html("");
              var svg = d3.select("#svg_PieChart_g_id");
              var g = svg.append("g")
                   .attr("transform", "translate(" + (svgWidth_pie+20)*2/3 + "," + svgHeight_pie *3/ 4 + ")");

              var color = d3.scaleOrdinal(['#9900e6','#b3b300','#ff7f00','#258e25','#cc0066']);
              var legendRectSize = 25; // defines the size of the colored squares in legend
              var legendSpacing = 6;
			  var dataMappingforPropertyType ={1:"Single Family Home",2:"Townhome",3:"Condominium",5:"Multi Family Home",6:"Mobile/Manufacture"};

        var pie = d3.pie().value(function(d) { 
                return (d.value/myEntireData.length)*100; 
                //return d.value/d.my
            });
         var slices = pie(myData_Pie);


        var path = d3.arc()
                     .outerRadius(radius - 10)
                     .innerRadius(0);

        var label = d3.arc()
                      .outerRadius(radius)
                      .innerRadius(radius - 80);
        var arc = g.selectAll(".arc")
                       .data(pie(myData_Pie))
                       .enter().append("g")
                       .attr("class", "arc");

            arc.append("path")
               .attr("d", path)
               .attr("fill", function(d) { return color(d.data.key); });
        
            console.log(arc)
        
            arc.append("text")
               .attr("transform", function(d) { 
                        return "translate(" + label.centroid(d) + ")"; 
                })
               .text(function(d) { return d.data.key; });

            
            svg.append('g').attr("transform", "translate(" + svgWidth_pie / 60 + "," + (svgHeight_pie-20) / 2 + ")")
               .attr('class', 'legend legendPie')
               .selectAll('text')
               .data(slices)
               .enter()
               .append('text')
               .text(function(d) { return '•' + d.data.key + ') ' + dataMappingforPropertyType[d.data.key] + '['+d.data.value+']'; })
               .attr('fill', function(d) { return color(d.data.key); })
               .attr('y', function(d, i) { return 20 * (i + 1); })
	}

            function createDoNut(){
				$("#svg_DoNut_g_id").html("");
              var svg = d3.select("#svg_DoNut_g_id");
              var g = svg.append("g").attr("transform", "translate(" + (svgWidth_donut*4) / 3 + "," + (svgHeight_donut * 3)/4 + ")");

              var color = d3.scaleOrdinal(['#ff8080','#8080ff ','#ff7f00','#258e25','#cc0066']);
              var legendRectSize = 25; // defines the size of the colored squares in legend
              var legendSpacing = 6; 
			  var dataMappingforProperty ={1:"Purchase",2:"ReFinance"};

        var pie = d3.pie().value(function(d) { 
                return (d.value/myEntireData.length)*100; 
                //return d.value/d.my
            });
         var slices = pie(myData_Donut);


        var path = d3.arc()
                     .outerRadius(radius - 10)
                     .innerRadius(50);

        var label = d3.arc()
                      .outerRadius(radius)
                      .innerRadius(radius - 80);
        var arc = g.selectAll(".arc")
                       .data(pie(myData_Donut))
                       .enter().append("g")
                       .attr("class", "arc");

            arc.append("path")
               .attr("d", path)
               .attr("fill", function(d) { return color(d.data.key); });
        
            console.log(arc)
        
            arc.append("text")
               .attr("transform", function(d) { 
                        return "translate(" + label.centroid(d) + ")"; 
                })
               .text(function(d) { return d.data.key; });

            svg.append("g")
               .attr("transform", "translate(" + (svgWidth_donut + 10) + " ," + (svgHeight_donut + margin_donut.top)*4/3 + ")")
               .append("text")
               .attr("class", "title");
            svg.append('g')
               .attr('class', 'legend legendDonut')
               .attr("transform", "translate(" + (svgWidth_donut + 10)/20 + " ," + (svgHeight_donut + margin_donut.top+15)/2 + ")")
               .selectAll('text')
               .data(slices)
               .enter()
               .append('text')
               .text(function(d) { return '•'  + dataMappingforProperty[d.data.key] +'['+d.data.value+']'; })
               .attr('fill', function(d) { return color(d.data.key); })
               .attr('y', function(d, i) { return 20 * (i + 1); })
	}
           function createLineGraph(){
			$("#svg_LineGraph_g_id").html("");
            var svg = d3.select("#svg_LineGraph_g_id");
			var g = svg.append("g")
					.attr("transform", 
			  "translate(" + margin_line.left + "," + margin_line.top + ")");
			var x = d3.scaleTime().rangeRound([0, svgWidth_line-10]);
			var y = d3.scaleLinear().rangeRound([svgHeight_line, 0]);
			var line = d3.line()
		   .x(function(d) { return x(d.date)})
		   .y(function(d) { return y(d.value)})
		   x.domain(d3.extent(myData_Line, function(d) { return d.date }));
		   y.domain(d3.extent(myData_Line, function(d) { return d.value }));
		   g.append("g")
		   .attr("transform", "translate(0," + svgHeight_line + ")")
		   .call(d3.axisBottom(x))
		   .select(".domain");
		   
		   
		   g.append("g")
		   .call(d3.axisLeft(y))
		   .append("text")
		   .attr("fill", "#000")
		   .attr("transform", "rotate(-90)")
		   .attr("y", 6)
		   .attr("dy", "-5em")
		   .attr("dx", "-6em")
		   .attr("text-anchor", "end")
		   .text("Total");

		   g.append("path")
		.datum(myData_Line)
		.attr("fill", "none")
		.attr("stroke", "steelblue")
		.attr("stroke-linejoin", "round")
		.attr("stroke-linecap", "round")
		.attr("stroke-width", 1.5)
		.attr("d", line);
            }
		
		function statusChange (){
			var selectedVal = $("#StatusDD").val();
			generateLenderBar(selectedVal,"Status");
            createLenderBarChart();
            generateCreditBar(selectedVal,"Status");
            createCreditBar();
            generatePieChart(selectedVal,"Status");
			createPieChart();
			generateLineGraph(selectedVal,"Status");
			createLineGraph();
			generateDoNut(selectedVal,"Status");
            createDoNut();
			generateChorData(selectedVal, "Status");
			showMap();
			
		}
		    function generateChorData(myCommodity, Filtertype) {
			debugger;
      if(myCommodity == "1" && Filtertype == "Status"){
					myChorData = d3.nest()
					.key(function (d) { return d.State_Code;})
					.sortKeys(d3.descending)
					.key(function(v){return v.Status==1;})
					.rollup(function (d) {
					  return d.length;
					}).entries(myEntireData);
				for(var i=0;i<myChorData.length;i++){
				if(myChorData[i].values.length > 1){
					if(myChorData[i].values[0].key == "true"){
					myChorData[i].value = myChorData[i].values[0].value;
					}
					else if(myChorData[i].values[1].key == "true"){
					myChorData[i].value = myChorData[i].values[1].value;
					}
					else{
					myChorData[i].value = 0;
					}
				}
				else{
					if(myChorData[i].values[0].key == "true"){
					myChorData[i].value = myChorData[i].values[0].value;
					}
					else{
					myChorData[i].value = 0;
					}
					
				}
			}
			
			
			}else if(myCommodity == "2" && Filtertype == "Status"){
				  myChorData = d3.nest()
					.key(function (d) { return d.State_Code; })
					.sortKeys(d3.descending)
					.key(function(v){return v.Status==2;})
					.rollup(function (d) {
					  return d.length;
					}).entries(myEntireData);
				for(var i=0;i<myChorData.length;i++){
				if(myChorData[i].values.length > 1){
					if(myChorData[i].values[0].key == "true"){
					myChorData[i].value = myChorData[i].values[0].value;
					}
					else if(myChorData[i].values[1].key == "true"){
					myChorData[i].value = myChorData[i].values[1].value;
					}
					else{
					myChorData[i].value = 0;
					}
				}
				else{
					if(myChorData[i].values[0].key == "true"){
					myChorData[i].value = myChorData[i].values[0].value;
					}
					else{
					myChorData[i].value = 0;
					}
					
					}
				}
			}
			else{
				myChorData = d3.nest()
					.key(function (d) { return d.State_Code; })
					.sortKeys(d3.descending)

					.rollup(function (d) {
					  return d.length;
					}).entries(myEntireData);
			}
      myChorData.filter(function(d,i) {
        return null})
    }
    function showMap() {
     
		$("#svg_Choropleth").html("");
      var svg = d3.select("#svg_Choropleth")
        

      var losses = d3.map();
      myChorData.map(function (d, i) {
        if (d.key > 10) {
          losses.set(d.key, d.value);
        } else {
          losses.set(("0" + d.key).slice(-2), d.value);
        }
      })
      var path = d3.geoPath();

      var x = d3.scaleLinear()
        .domain([11, 20])
        .rangeRound([500, 860]);

      var color = d3.scaleThreshold()
        .domain(d3.range(1, 12))
        .range(colors);



      var promises = [d3.json("https://raw.githubusercontent.com/akshaybankar47/VA_Assignment4/master/D3.json")]
      Promise.all(promises).then(ready)
      function ready([us]) {

        svg.append("path")
          .attr('stroke', "#000")
          .attr("stroke-width", 1)
          .attr("class", "country-border")
          .attr("d", path(topojson.feature(us, us.objects.nation)));

        svg.append("path")
          .datum(topojson.mesh(us, us.objects.states, function (a, b) { return a !== b; }))
          .attr("class", "state-border")
          .attr("d", path);

        var state_g = svg.append("g")
        state_g.selectAll("path")
          .data(topojson.feature(us, us.objects.states).features)
          .enter().append("path")
          .attr("class", "state")
          .attr("fill", function (d) { return color((d.amount = losses.get(d.id)) / 10); })
          .attr("d", path)
          .append("title")
          .text(function (d) {
            var j = 0;
            console.log(ED_Data);
            for (j = 0; j < ED_Data.length; j++) {
              if (ED_Data[j].value == d.id) {
                stateValue = ED_Data[j].key;
                break;
              }
            }
            return stateValue + "\n" + d.amount;
          });
      }
    }
			window.onload = loadData;
    </script>
  </head>
  <body>
  <header>
<div class="row"><div class="logoContainer"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 452.8 165.4" class="logo"><style>.st0{fill:#FFF}</style><g id="LendingTree_Logo_8_"><g id="LendingTree_8_"><g id="Registered_Trademark_16_"><path class="st0" d="M436.7 85.5c-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.5-.4s-1 .1-1.5.4-.9.6-1.1 1.1c-.3.5-.4 1-.4 1.6 0 .5.1 1 .4 1.5s.7.9 1.1 1.1c.5.3 1 .4 1.5.4s1-.1 1.5-.4.9-.7 1.1-1.1c.3-.5.4-1 .4-1.5 0-.6-.1-1.1-.4-1.6zm-.5 2.8c-.2.4-.5.7-.9.9-.4.2-.8.3-1.2.3-.4 0-.8-.1-1.2-.3-.4-.2-.7-.5-.9-.9-.2-.4-.3-.8-.3-1.2 0-.4.1-.9.3-1.2.2-.4.5-.7.9-.9.4-.2.8-.3 1.2-.3.4 0 .8.1 1.2.3.4.2.7.5.9.9.2.4.3.8.3 1.2s-.1.8-.3 1.2z"/><path class="st0" d="M435.1 88l-.2-.4-.2-.2c-.1 0-.1-.1-.2-.1.3 0 .5-.1.6-.3.2-.2.2-.4.2-.6s0-.3-.1-.5l-.3-.3c-.1-.1-.3-.1-.5-.1h-1.6v3.2h.6v-1.3h.2c.2 0 .3 0 .4.1s.3.3.4.7l.3.5h.8l-.4-.7zm-.8-1.2h-1v-.9h1c.1 0 .2.1.2.1.1.1.1.1.1.2s0 .2-.1.2c0 .3-.1.3-.2.4z"/></g><g id="Registered_Trademark_15_"><path class="st0" d="M436.7 85.5c-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.5-.4s-1 .1-1.5.4-.9.6-1.1 1.1c-.3.5-.4 1-.4 1.6 0 .5.1 1 .4 1.5s.7.9 1.1 1.1c.5.3 1 .4 1.5.4s1-.1 1.5-.4.9-.7 1.1-1.1c.3-.5.4-1 .4-1.5 0-.6-.1-1.1-.4-1.6zm-.5 2.8c-.2.4-.5.7-.9.9-.4.2-.8.3-1.2.3-.4 0-.8-.1-1.2-.3-.4-.2-.7-.5-.9-.9-.2-.4-.3-.8-.3-1.2 0-.4.1-.9.3-1.2.2-.4.5-.7.9-.9.4-.2.8-.3 1.2-.3.4 0 .8.1 1.2.3.4.2.7.5.9.9.2.4.3.8.3 1.2s-.1.8-.3 1.2z"/><path class="st0" d="M435.5 86.1l-.5-.5-1 1-.9-1-.5.5 1 .9-1 1 .5.5.9-1 1 1 .5-.5-1-1z"/></g><path class="st0" d="M432 106.7c0-7.7-1.8-13.6-5.3-17.7s-8.8-6.2-15.6-6.2c-6.9 0-12.2 2.2-16 6.4-3.7 4.2-5.6 10.4-5.6 18.5 0 5.2 1 9.6 3.1 13.1 2 3.5 4.8 6.1 8.2 7.8 3.4 1.7 7.2 2.5 11.4 2.5 3.3 0 6.3-.4 8.8-1.1 2.6-.8 5-1.9 7.2-3.5.7-.5 1-1.1 1-1.8 0-.4-.1-.9-.3-1.4l-1.9-3.9c-.4-1.2-1.2-1.3-1.6-1.3s-.8.2-1.3.5c-3.1 2.1-6.7 3.2-10.7 3.2-4.1 0-7.3-1-9.5-3-2.1-1.9-3.2-4.5-3.3-7.9h28c1.3-.2 3.4-.7 3.4-4.2zm-31.3-4.4c.1-3.1 1-5.6 2.7-7.5 1.8-2 4.4-3 7.8-3 3.3 0 5.9 1 7.5 2.9 1.5 1.8 2.4 4.4 2.5 7.6h-20.5zm-35.8-19.6c-6.9 0-12.2 2.2-16 6.4-3.7 4.2-5.6 10.4-5.6 18.5 0 5.2 1 9.6 3.1 13.1 2 3.5 4.8 6.1 8.2 7.8 3.4 1.7 7.2 2.5 11.4 2.5 3.3 0 6.3-.4 8.8-1.1 2.6-.8 5-1.9 7.2-3.5.7-.5 1-1.1 1-1.8 0-.4-.1-.9-.3-1.4l-1.9-3.9c-.4-1.2-1.2-1.3-1.6-1.3s-.8.2-1.3.5c-3.1 2.1-6.7 3.2-10.7 3.2-4.1 0-7.3-1-9.5-3-2.1-1.9-3.2-4.5-3.3-7.9h28c1.2 0 3.3-.5 3.3-4 0-7.7-1.8-13.6-5.3-17.7-3.4-4.3-8.6-6.4-15.5-6.4zm10.1 19.6h-20.6c.1-3.1 1-5.6 2.7-7.5 1.8-2 4.4-3 7.8-3 3.3 0 5.9 1 7.5 2.9 1.7 1.9 2.5 4.4 2.6 7.6zm-30-15c.1-.5.2-1 0-1.4-.1-.4-.4-.8-.9-1.2-1.7-1.3-6.9-1.5-8.2-1.5-1 0-4.6.1-11.7 2.2-.4-.6-1-1-1.7-1h-5.2c-1.1 0-1.9.3-2.3.9-.4.5-.5 1.3-.5 2.4v37.9c0 1.3.3 2.3.9 3l.1.1c.6.7 1.6 1 2.8 1h4.1c1.3 0 2.3-.4 2.9-1.1.6-.7.8-1.7.8-3v-31c1-.5 5.9-1.5 8.8-1.5.4 0 .8 0 1.2.1 1.3.1 2.4.4 3.4.9l.8.2h.2c.5 0 1.3-.2 1.6-1.4l2.9-5.6zm-35.7-2.1c-.5-.7-1.4-1-2.7-1h-8V72.6c0-1.2-.2-2.2-.8-2.8-.6-.7-1.4-1.1-2.6-1.1h-4.9c-1.2 0-2.1.4-2.6 1.1s-.8 1.6-.8 2.8v41.5c0 13.5 8.4 16.4 12.7 16.9 1.4.2 2.6-.9 2.6-2.3v-6.2c0-.9-.5-1.6-1.2-2-.4-.2-.9-.6-1.3-1.1-.8-1-1.1-3-1.1-5.6V94.4h8c1.3 0 2.2-.3 2.7-.9s.7-1.5.7-2.9v-2.5c0-1.3-.2-2.3-.7-2.9zm-36.5-.7c-3.3-1.1-6.8-1.7-10.3-1.7-7.6 0-13.5 2.2-17.5 6.4-4 4.3-6.1 10.4-6.1 18.3 0 6.9 1.7 12.4 5.1 16.3 3.4 3.9 8.2 5.9 14.3 5.9 2.9 0 5.4-.5 7.4-1.4 1.4-.6 2.8-1.5 3.9-2.7-.2 3.3-.9 5.8-2.2 7.2-1.5 1.8-3.8 2.6-7.1 2.6-3.1 0-6.1-.5-8.6-1.4-1-.4-2.1.4-2.1 1.4l-.2 6.7c0 .7.5 1.4 1.2 1.6 2.1.5 6.5 1.5 10.6 1.5 6.8 0 11.9-2.2 15.2-6.6 3.2-4.3 4.8-10.4 4.8-17.9V88.3c.1 0-5.1-2.7-8.4-3.8zm-3 9.8v15.8c0 2.9-.8 5.3-2.5 6.9s-3.9 2.5-6.6 2.5c-3.4 0-6-1-7.7-3-1.7-2.1-2.6-5.3-2.6-9.6 0-9.4 3.8-13.9 11.6-13.9 1.6 0 3.2.1 4.6.4 1.3.1 2.3.5 3.2.9zm-50.3-11.5c-5.6 0-8.4.7-12.6 1.8-.7.2-1.4.4-2.1.5-.3-.6-1-1-1.7-1h-5.2c-1.1 0-1.9.3-2.3.9-.4.5-.5 1.3-.5 2.4v38.2c0 1.3.3 2.3.9 3 .6.7 1.6 1.1 2.9 1.1h4.1c1.3 0 2.3-.4 2.9-1.1.6-.7.8-1.7.8-3V94.4c1.1-.5 6.7-1.5 9.6-1.5 2.4 0 4.1.5 5.1 1.6s1.5 3.1 1.5 5.8v25.4c0 1.3.3 2.3.9 3 .6.7 1.6 1.1 2.9 1.1h4.2c1.3 0 2.3-.4 2.9-1.1.6-.7.8-1.7.8-3V99.6c0-5.5-1.4-9.7-4.1-12.5-2.9-2.9-6.5-4.3-11-4.3zm-34 1.4h-4.1c-1.3 0-2.3.4-2.9 1.1-.6.7-.9 1.7-.9 3.1v37.3c0 1.3.3 2.3.9 3 .6.7 1.6 1.1 2.9 1.1h4.1c1.3 0 2.3-.4 2.9-1.1.6-.7.8-1.7.8-3V88.4c0-1.4-.3-2.4-.9-3.1-.5-.7-1.5-1.1-2.8-1.1zm-14.6-19.1c-3.4 1.5-10.5 7.4-10.5 8.8v12c-2.6-2.1-6.4-3.2-11.1-3.2-4 0-7.6 1-10.5 3.1-3 2-5.3 4.9-6.8 8.5-1.6 3.6-2.3 7.8-2.3 12.5 0 16.1 7.8 24.2 23.1 24.2 3.7 0 7.3-.6 10.7-1.7 3.4-1.2 8.6-3.8 8.6-3.8V66.1c0-.3-.1-.5-.2-.7-.4-.2-.7-.5-1-.3zM160.5 101v18.3c-1.9 1.2-4.4 1.8-7.5 1.8-4 0-7-1.1-8.9-3.2-1.9-2.2-2.9-5.8-2.9-10.8 0-4.5.9-8.1 2.7-10.6 1.7-2.4 4.4-3.7 7.9-3.7 2.6 0 4.8.7 6.4 2.1 1.5 1.3 2.3 3.4 2.3 6.1zm-50.2-18.2c-5.6 0-8.4.7-12.6 1.8l-.3.1c-.6.2-1.2.3-1.9.5-.2-.4-.7-1-1.7-1h-5.2c-1.1 0-1.9.3-2.3.9-.4.5-.5 1.3-.5 2.4v38.2c0 1.3.3 2.3.9 3s1.6 1.1 2.9 1.1h4.1c1.3 0 2.3-.4 2.9-1.1.6-.7.8-1.7.8-3V94.4c1.1-.5 6.7-1.5 9.6-1.5 2.4 0 4.1.5 5.1 1.6s1.5 3 1.5 5.8v25.4c0 1.3.3 2.3.9 3 .6.7 1.6 1.1 2.9 1.1h4.2c1.3 0 2.3-.4 2.9-1.1.6-.7.8-1.7.8-3V99.6c0-5.5-1.4-9.7-4.1-12.5-2.8-2.9-6.5-4.3-10.9-4.3zm-49.9-.1c-6.9 0-12.2 2.2-16 6.4-3.7 4.2-5.6 10.4-5.6 18.5 0 5.2 1 9.6 3.1 13.1 2 3.5 4.8 6.1 8.2 7.8 3.4 1.7 7.2 2.5 11.4 2.5 3.3 0 6.3-.4 8.8-1.1 2.6-.8 5-1.9 7.2-3.5.7-.5 1-1.1 1-1.8 0-.4-.1-.9-.3-1.4l-1.9-3.9c-.4-1.2-1.2-1.3-1.6-1.3s-.8.2-1.3.5c-3.1 2.1-6.7 3.2-10.7 3.2-4.1 0-7.3-1-9.5-3-2.1-1.9-3.2-4.5-3.3-7.9h28c1.2 0 3.3-.5 3.3-4 0-7.7-1.8-13.6-5.3-17.7-3.4-4.3-8.7-6.4-15.5-6.4zm10.1 19.6H49.9c.1-3.1 1-5.6 2.7-7.5 1.8-2 4.4-3 7.8-3 3.3 0 5.9 1 7.5 2.9 1.6 1.9 2.5 4.4 2.6 7.6zm-36.1 17.1c-.8-1-1.1-3-1.1-5.6V70.2c0-1.2-.2-2.2-.8-2.8-.6-.7-1.4-1.1-2.6-1.1H25c-1.2 0-2.1.4-2.6 1.1s-.8 1.6-.8 2.8v43.9c0 13.5 8.4 16.4 12.7 16.9 1.4.2 2.6-.9 2.6-2.3v-6.2c0-.9-.5-1.6-1.2-2-.4-.2-.8-.5-1.3-1.1z"/></g><g id="Leaf_11_"><linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="178.168" y1="89.088" x2="236.09" y2="147.01" gradientTransform="matrix(1 0 0 -1 0 168)"><stop offset=".05" stop-color="#078181"/><stop offset=".213" stop-color="#07997d"/><stop offset=".41" stop-color="#08af7a"/><stop offset=".599" stop-color="#08bc78"/><stop offset=".77" stop-color="#08c177"/></linearGradient><path d="M235 20c-3 .5-22.6 2.6-37.1 6.2-20.6 5.1-20.2 22.3-20.2 29.1v23c0 .3.3.4.4.1 14.3-19 29.1-31.4 29.1-31.4s.1-.1-.1 0c-1.3.3-8.7 2.7-17.7 7.6v-2.9c-.1-11.7 6.8-14.9 15-17.2 6.7-1.9 19.2-2.9 19.2-2.9s-1 7.3-2.3 22.2c-1 10.9-8.9 13.3-20.1 13.3h-6.3c-5 7.2-5.7 11.5-5.7 11.5h12.3c23.4 0 28.6-10.3 29.7-25.5 1.4-19.4 3.4-30.6 3.9-32.7.2-.2.1-.4-.1-.4z" fill="url(#SVGID_1_)"/></g></g></svg></div><div class="headerContainer"><h2 class="">LendingTree Dashboard</h2></div></div>
  </header>
  <div>
  <div class="ddlabel" >
    <p>Offer Status</p></div>
  <div class="statusDD" >
  <select id="StatusDD" onchange="statusChange()" style="margin: 10px;"> 
  <option value="" selected="">All</option>
  <option value="1">Accepted</option>
  <option value="2">Rejected</option>
    </select></div></div>
    <div class="chartContainer">
<div>
 
  <div  class="row1"><div id="LenderBar" align="center" class="chartTitle">Lenders vs Offers</div><svg id="LenderBarSVG"></svg></div>
<div class="row1"><div id="PieChart" align="center"class="chartTitle">Property Type vs Purchases</div><svg id="PieChartSVG" class="piechartsvg"></svg></div>
<div class="row1"><div id="MonthlyLineChart" align="center" class="chartTitle">Number of Customers per Month</div><svg id="MonthlyLineChartSVG"></svg></div>

  </div>
  <div>
  	<div class="row2 mapRow"><div id="Choropleth" align="center" class="chartTitle">State-wise Customers</div><div class="mapContainer"><svg id="ChoroplethSVG" class="mapSVG"></svg></div></div>
  	
        <div  class="row2"><div id="CreditScoreBar" align="center" class="chartTitle">Offers vs Credit Score</div><svg id="CreditScoreSVG" class="CreditScoreSVG"></svg></div>
<div class="row2"><div id="DoNut" align="center" class="chartTitle">Requested Loan Type </div><svg class = "donutsvg" id="DoNutSVG"></svg></div>
  

</div>

</div>

    </body>
</html>
